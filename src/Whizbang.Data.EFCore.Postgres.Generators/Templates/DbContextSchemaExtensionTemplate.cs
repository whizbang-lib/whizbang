#region HEADER
// <auto-generated/>
// Generated at: __TIMESTAMP__
#endregion
#nullable enable

using System.Threading;
using System.Threading.Tasks;
using Microsoft.EntityFrameworkCore;

namespace __DBCONTEXT_NAMESPACE__.Generated;

/// <summary>
/// Extension methods for __DBCONTEXT_CLASS__ schema initialization.
/// </summary>
public static class __DBCONTEXT_CLASS__SchemaExtensions {
  /// <summary>
  /// Ensures all Whizbang tables exist for __DBCONTEXT_CLASS__.
  /// Creates tables from entity configurations (ConfigureWhizbang() in OnModelCreating).
  /// Idempotent - safe to call multiple times.
  /// </summary>
  /// <param name="dbContext">The __DBCONTEXT_CLASS__ instance</param>
  /// <param name="cancellationToken">Cancellation token</param>
  public static async Task EnsureWhizbangTablesCreatedAsync(
    this __DBCONTEXT_FQN__ dbContext,
    CancellationToken cancellationToken = default) {

    // EF Core creates schema from entity configurations in OnModelCreating
    // Includes all PerspectiveRow<T> entities + Inbox/Outbox/EventStore
    await dbContext.Database.EnsureCreatedAsync(cancellationToken);
  }
}
