using Microsoft.Extensions.DependencyInjection;
using Whizbang.Core;
using Whizbang.Core.Perspectives;

namespace Whizbang.Core.Generated;

#region HEADER
// This region gets replaced with generated header + timestamp
#endregion

/// <summary>
/// Extension methods for registering {{PERSPECTIVE_CLASS_COUNT}} discovered perspective(s) with {{REGISTRATION_COUNT}} event handler(s).
/// Perspectives are registered as Scoped services and updated via Event Store.
/// Generated by Whizbang.Generators.PerspectiveDiscoveryGenerator.
/// </summary>
public static class PerspectiveRegistrationExtensions {
  /// <summary>
  /// Registers all discovered IPerspectiveOf implementations with the service collection.
  /// Each perspective is registered as Scoped to match the typical database context lifetime.
  /// Returns a WhizbangPerspectiveBuilder for fluent configuration of storage providers.
  /// </summary>
  /// <param name="services">The service collection to add registrations to</param>
  /// <returns>A WhizbangPerspectiveBuilder for configuring storage providers</returns>
  public static WhizbangPerspectiveBuilder AddWhizbangPerspectives(this IServiceCollection services) {
    #region PERSPECTIVE_REGISTRATIONS
    // This region gets replaced with generated registration code
    #endregion

    return new WhizbangPerspectiveBuilder(services);
  }
}
